# üèóÔ∏è **ARCHITECTURE STOCKOSS - VISION TECHNIQUE**
## Diagrammes et Flux de Donn√©es D√©taill√©s

> **Focus** : Compr√©hension visuelle de l'architecture serverless scalable pour 1M commandes/an

---

## üåê **SCH√âMA GLOBAL D'ARCHITECTURE**

```
                                    INTERNET
                                       ‚îÇ
                               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                               ‚îÇ   CLOUDFRONT  ‚îÇ
                               ‚îÇ   + Route 53  ‚îÇ
                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                       ‚îÇ
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ              ‚îÇ              ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ   FRONTEND   ‚îÇ      ‚îÇ      ‚îÇ  API GATEWAY ‚îÇ
                ‚îÇ   (S3 + CF)  ‚îÇ      ‚îÇ      ‚îÇ   (Managed)  ‚îÇ
                ‚îÇ              ‚îÇ      ‚îÇ      ‚îÇ              ‚îÇ
                ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ      ‚îÇ      ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
                ‚îÇ ‚îÇ Next.js  ‚îÇ ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇRate Limit‚îÇ ‚îÇ
                ‚îÇ ‚îÇ   PWA    ‚îÇ ‚îÇ      ‚îÇ      ‚îÇ ‚îÇAuth/Cache‚îÇ ‚îÇ
                ‚îÇ ‚îÇDashboard ‚îÇ ‚îÇ      ‚îÇ      ‚îÇ ‚îÇTransform ‚îÇ ‚îÇ
                ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ      ‚îÇ      ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                      ‚îÇ              ‚îÇ
                                      ‚îÇ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                      ‚îÇ      ‚îÇ    LAMBDA    ‚îÇ
                                      ‚îÇ      ‚îÇ ORCHESTRATOR ‚îÇ
                                      ‚îÇ      ‚îÇ              ‚îÇ
                                      ‚îÇ      ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
                                      ‚îÇ      ‚îÇ ‚îÇ Router   ‚îÇ ‚îÇ
                                      ‚îÇ      ‚îÇ ‚îÇ Validate ‚îÇ ‚îÇ
                                      ‚îÇ      ‚îÇ ‚îÇTransform ‚îÇ ‚îÇ
                                      ‚îÇ      ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
                                      ‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                      ‚îÇ              ‚îÇ
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
               ‚îÇ     SQS      ‚îÇ ‚îÇ    SQS    ‚îÇ ‚îÇ    SQS    ‚îÇ ‚îÇ    SQS    ‚îÇ
               ‚îÇ    ORDER     ‚îÇ ‚îÇ  BILLING  ‚îÇ ‚îÇNOTIFICATION‚îÇ ‚îÇ   FILE    ‚îÇ
               ‚îÇ    QUEUE     ‚îÇ ‚îÇ   QUEUE   ‚îÇ ‚îÇ   QUEUE   ‚îÇ ‚îÇ  QUEUE    ‚îÇ
               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ              ‚îÇ             ‚îÇ             ‚îÇ
               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
               ‚îÇ   LAMBDA     ‚îÇ ‚îÇ  LAMBDA   ‚îÇ ‚îÇ  LAMBDA   ‚îÇ ‚îÇ  LAMBDA   ‚îÇ
               ‚îÇ    ORDER     ‚îÇ ‚îÇ  INVOICE  ‚îÇ ‚îÇNOTIFICATION‚îÇ ‚îÇ   FILE    ‚îÇ
               ‚îÇ  PROCESSOR   ‚îÇ ‚îÇ GENERATOR ‚îÇ ‚îÇ  HANDLER  ‚îÇ ‚îÇ PROCESSOR ‚îÇ
               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ              ‚îÇ             ‚îÇ             ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îê
                              ‚îÇ       ‚îÇ             ‚îÇ             ‚îÇ   ‚îÇ
                              ‚ñº       ‚ñº             ‚ñº             ‚ñº   ‚ñº
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ                DATA LAYER                       ‚îÇ
                       ‚îÇ                                                 ‚îÇ
                       ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
                       ‚îÇ ‚îÇ    RDS    ‚îÇ ‚îÇ  REDIS  ‚îÇ ‚îÇDYNAMODB ‚îÇ ‚îÇ  S3  ‚îÇ ‚îÇ
                       ‚îÇ ‚îÇPostgreSQL ‚îÇ ‚îÇ CLUSTER ‚îÇ ‚îÇHOT DATA ‚îÇ ‚îÇDOCS  ‚îÇ ‚îÇ
                       ‚îÇ ‚îÇ r5.large  ‚îÇ ‚îÇ3 NODES  ‚îÇ ‚îÇSESSIONS ‚îÇ ‚îÇFILES ‚îÇ ‚îÇ
                       ‚îÇ ‚îÇ Multi-AZ  ‚îÇ ‚îÇFAILOVER ‚îÇ ‚îÇCOUNTERS ‚îÇ ‚îÇTEMPS ‚îÇ ‚îÇ
                       ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                      ‚îÇ         ‚îÇ
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ    ODOO     ‚îÇ ‚îÇ OPENWMS   ‚îÇ
                            ‚îÇ  SaaS 20u   ‚îÇ ‚îÇEC2 m5.lg  ‚îÇ
                            ‚îÇCRM/OMS/Bill ‚îÇ ‚îÇ   WMS     ‚îÇ
                            ‚îÇ REST APIs   ‚îÇ ‚îÇREST APIs  ‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                      ‚îÇ         ‚îÇ
                                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                ‚îÇ      ELK STACK      ‚îÇ
                                ‚îÇ  ElasticSearch      ‚îÇ
                                ‚îÇ + Kibana + Logstash ‚îÇ
                                ‚îÇ (Logs & Monitoring) ‚îÇ
                                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ **FLUX PRINCIPAL : CR√âATION COMMANDE**

### **√âtapes du Processus :**

1. **R√©ception Requ√™te** : Client envoie commande via frontend
2. **Validation Initiale** : API Gateway v√©rifie auth + rate limiting  
3. **Cache Check** : Lambda v√©rifie cache Redis pour donn√©es client
4. **Queue Asynchrone** : Commande mise en queue SQS pour traitement
5. **Traitement Batch** : Lambda traite 10 commandes simultan√©ment
6. **Int√©gration Odoo** : Cr√©ation commande dans syst√®me m√©tier
7. **R√©servation Stock** : Appel OpenWMS si n√©cessaire
8. **Notification** : Email/Push confirmant cr√©ation

**Avantages de ce flux :**
- ‚úÖ **R√©ponse imm√©diate** au client (202 Accepted)
- ‚úÖ **Traitement asynchrone** pour performance  
- ‚úÖ **Batch processing** pour efficacit√©
- ‚úÖ **Cache intelligent** pour r√©duire latence
- ‚úÖ **Resilience** avec dead letter queues

### **Diagramme de S√©quence :**

```mermaid
sequenceDiagram
    participant U as "Client Frontend"
    participant AG as "API Gateway"
    participant LO as "Lambda Orchestrator"
    participant SQ as "SQS Order Queue"
    participant LP as "Lambda Order Processor"
    participant OD as "Odoo SaaS"
    participant OW as "OpenWMS"
    participant RD as "Redis Cache"
    participant DB as "PostgreSQL"
    participant SN as "SQS Notification"

    U->>AG: POST /api/v1/orders (order data)
    AG->>AG: Rate limiting check
    AG->>AG: JWT validation
    
    AG->>LO: Forward request
    LO->>LO: Validate order data
    LO->>RD: Check cache (customer, stock)
    
    alt Cache hit
        RD-->>LO: Return cached data
    else Cache miss
        LO->>OD: Get customer data
        OD-->>LO: Customer details
        LO->>RD: Cache customer data (30min)
    end
    
    LO->>SQ: Queue order for processing
    LO-->>AG: Return 202 Accepted (order queued)
    AG-->>U: 202 Accepted + order_id
    
    Note over SQ,LP: Asynchronous Processing
    
    SQ->>LP: Trigger with order batch (10 msgs)
    
    loop For each order in batch
        LP->>LP: Business validation
        LP->>OD: Create order in Odoo
        OD-->>LP: Order created (odoo_id)
        
        alt Stock reservation needed
            LP->>OW: Reserve stock
            OW-->>LP: Stock reserved
        end
        
        LP->>DB: Log order processing
        LP->>RD: Invalidate cache (customer orders)
        LP->>SN: Queue success notification
    end
    
    LP-->>SQ: Batch processed successfully
    
    SN->>U: Email/Push notification (order confirmed)
```

---

## üí∞ **FLUX FACTURATION CUSTOM**

### **Processus de G√©n√©ration Facture :**

1. **D√©clenchement** : Demande g√©n√©ration facture avec template custom
2. **Queue Billing** : Traitement asynchrone pour √©viter timeouts  
3. **Enrichissement Donn√©es** : R√©cup√©ration donn√©es Odoo (commande + client + soci√©t√©)
4. **Calculs Complexes** : Taxes, remises, devises selon r√®gles m√©tier
5. **Template Engine** : Handlebars avec donn√©es structur√©es
6. **G√©n√©ration PDF** : Puppeteer pour rendu haute qualit√©
7. **Stockage S3** : Upload avec metadata et lifecycle
8. **Notification** : Email automatique au client avec PDF

**Fonctionnalit√©s Avanc√©es :**
- ‚úÖ **Templates multiples** (soci√©t√©, langue, type client)
- ‚úÖ **Champs custom** param√©trables par client
- ‚úÖ **Calculs automatiques** taxes/remises
- ‚úÖ **Multi-langue** et multi-devise
- ‚úÖ **Archivage intelligent** S3 lifecycle

### **Diagramme de S√©quence :**

```mermaid
sequenceDiagram
    participant U as "Frontend User"
    participant AG as "API Gateway"
    participant SQ as "SQS Billing Queue"
    participant LI as "Lambda Invoice Generator"
    participant OD as "Odoo SaaS"
    participant S3 as "S3 Templates"
    participant S3D as "S3 Documents"
    participant SN as "SQS Notification"
    participant EM as "SES Email"

    U->>AG: POST /api/v1/billing/generate-invoice
    Note over U,AG: Request: {orderId, templateId, customFields}
    
    AG->>SQ: Queue invoice generation
    AG-->>U: 202 Accepted (invoice queued)
    
    Note over SQ,LI: Asynchronous Processing
    
    SQ->>LI: Trigger invoice generation
    
    LI->>OD: Get order details
    OD-->>LI: Order data + customer info
    
    LI->>OD: Get company settings
    OD-->>LI: Company details + tax rules
    
    LI->>LI: Calculate amounts (taxes, discounts)
    
    LI->>S3: Get invoice template
    S3-->>LI: HBS template file
    
    LI->>LI: Generate PDF with Puppeteer
    Note over LI: Template + Data = Custom PDF
    
    LI->>S3D: Upload invoice PDF
    S3D-->>LI: S3 URL
    
    LI->>OD: Update order with PDF link
    OD-->>LI: Order updated
    
    LI->>SN: Queue email notification
    LI-->>SQ: Invoice generated successfully
    
    SN->>EM: Send invoice email to customer
    EM-->>U: Email with PDF attachment
```

---

## üìÑ **FLUX OCR ET TRAITEMENT DOCUMENTS**

### **Pipeline de Traitement Intelligent :**

1. **Upload Trigger** : √âv√©nement S3 d√©clenche traitement automatique
2. **Validation** : V√©rification taille/format (limite 50MB)
3. **D√©tection Langue** : AWS Comprehend identifie la langue
4. **OCR Adaptatif** : Textract avec mode selon type document
5. **Extraction Structur√©e** : Donn√©es organis√©es selon template
6. **Classification ML** : Cat√©gorisation automatique du document
7. **Indexation** : Stockage DB + indexation ElasticSearch  
8. **Alertes Business** : Notification si document critique d√©tect√©

**Intelligence Artificielle :**
- ‚úÖ **OCR Multimodal** : Texte + tableaux + formulaires
- ‚úÖ **Classification Auto** : ML pour typage document
- ‚úÖ **Extraction M√©tier** : Factures, contrats, bons de livraison
- ‚úÖ **Recherche S√©mantique** : Full-text + contexte
- ‚úÖ **Alertes Intelligentes** : Seuils de confiance variables

### **Diagramme de S√©quence :**

```mermaid
sequenceDiagram
    participant U as "User Upload"
    participant S3 as "S3 Documents"
    participant LF as "Lambda File Processor"
    participant TX as "AWS Textract"
    participant CP as "AWS Comprehend"
    participant DB as "PostgreSQL"
    participant ES as "ElasticSearch"
    participant SN as "SQS Notification"

    U->>S3: Upload document (PDF/JPG)
    S3->>LF: Trigger S3 event
    
    LF->>LF: Check file size/type
    Note over LF: Skip if > 50MB
    
    LF->>CP: Detect document language
    CP-->>LF: Language + confidence
    
    alt Invoice/Receipt detected
        LF->>TX: analyzeExpense (structured)
        TX-->>LF: Structured expense data
    else Other document
        LF->>TX: detectDocumentText (OCR)
        TX-->>LF: Raw text extraction
    end
    
    LF->>LF: Extract structured data
    LF->>LF: Classify document type
    Note over LF: ML classification (invoice, contract, etc.)
    
    LF->>DB: Store extracted data
    DB-->>LF: Record ID
    
    LF->>ES: Index for search
    ES-->>LF: Document indexed
    
    alt High-confidence important document
        LF->>SN: Queue alert notification
        Note over SN: Notify business users
    end
    
    LF-->>S3: Processing completed
```

---

## üìä **ARCHITECTURE DES DONN√âES**

```
                         DATA ARCHITECTURE LAYERS
                         
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        HOT DATA LAYER                       ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  DYNAMODB   ‚îÇ  ‚îÇ   REDIS     ‚îÇ  ‚îÇ    API GATEWAY      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ  CLUSTER    ‚îÇ  ‚îÇ       CACHE         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Sessions  ‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ ‚Ä¢ Responses         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Counters  ‚îÇ  ‚îÇ ‚Ä¢ User cache‚îÇ  ‚îÇ ‚Ä¢ Rate limits       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Real-time ‚îÇ  ‚îÇ ‚Ä¢ App cache ‚îÇ  ‚îÇ ‚Ä¢ Transform         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   inventory ‚îÇ  ‚îÇ ‚Ä¢ Analytics ‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ   cache     ‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ       ‚îÇ                ‚îÇ                    ‚îÇ               ‚îÇ
‚îÇ    < 1ms           < 5ms              < 10ms               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                ‚îÇ                    ‚îÇ
        ‚ñº                ‚ñº                    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     WARM DATA LAYER                         ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ            ‚îÇ           POSTGRESQL                ‚îÇ          ‚îÇ
‚îÇ            ‚îÇ          (RDS r5.large)            ‚îÇ          ‚îÇ
‚îÇ            ‚îÇ                                     ‚îÇ          ‚îÇ
‚îÇ            ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ          ‚îÇ
‚îÇ            ‚îÇ  CORE   ‚îÇ ORDERS  ‚îÇ  LOGS   ‚îÇ          ‚îÇ
‚îÇ            ‚îÇ TABLES  ‚îÇ TABLES  ‚îÇ TABLES  ‚îÇ          ‚îÇ
‚îÇ            ‚îÇ         ‚îÇ         ‚îÇ         ‚îÇ          ‚îÇ
‚îÇ            ‚îÇ ‚Ä¢ Users ‚îÇ ‚Ä¢ Orders‚îÇ ‚Ä¢ Audit ‚îÇ          ‚îÇ
‚îÇ            ‚îÇ ‚Ä¢ Config‚îÇ ‚Ä¢ Items ‚îÇ ‚Ä¢ Integr‚îÇ          ‚îÇ
‚îÇ            ‚îÇ ‚Ä¢ Cache ‚îÇ ‚Ä¢ Status‚îÇ ‚Ä¢ Events‚îÇ          ‚îÇ
‚îÇ            ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ          ‚îÇ
‚îÇ            ‚îÇ                                     ‚îÇ          ‚îÇ
‚îÇ            ‚îÇ       Multi-AZ + Read Replicas      ‚îÇ          ‚îÇ
‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                             ‚îÇ                               ‚îÇ
‚îÇ                       < 50ms read                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     COLD DATA LAYER                         ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  S3 TIERS   ‚îÇ ELASTICSEARCH‚îÇ      EXTERNAL           ‚îÇ
‚îÇ             ‚îÇ    SEARCH    ‚îÇ      SYSTEMS            ‚îÇ
‚îÇ ‚Ä¢ Standard  ‚îÇ              ‚îÇ                         ‚îÇ
‚îÇ   (0-30d)   ‚îÇ ‚Ä¢ Documents  ‚îÇ ‚Ä¢ Odoo SaaS             ‚îÇ
‚îÇ ‚Ä¢ IA        ‚îÇ ‚Ä¢ Full-text  ‚îÇ ‚Ä¢ OpenWMS               ‚îÇ
‚îÇ   (30-90d)  ‚îÇ ‚Ä¢ Analytics  ‚îÇ ‚Ä¢ Transport APIs        ‚îÇ
‚îÇ ‚Ä¢ Glacier   ‚îÇ              ‚îÇ                         ‚îÇ
‚îÇ   (90d-2y)  ‚îÇ              ‚îÇ                         ‚îÇ
‚îÇ ‚Ä¢ Deep      ‚îÇ              ‚îÇ                         ‚îÇ
‚îÇ   Archive   ‚îÇ              ‚îÇ                         ‚îÇ
‚îÇ   (>2y)     ‚îÇ              ‚îÇ                         ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ       ‚îÇ               ‚îÇ                     ‚îÇ                ‚îÇ
‚îÇ Auto-lifecycle   Search index         REST APIs             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ               ‚îÇ                     ‚îÇ
   Cost optimized  Fast search         Reliable sync
```

### **Strat√©gie de Donn√©es par Couche :**

#### **üî• Hot Data (< 10ms)**
- **DynamoDB** : Sessions, compteurs temps r√©el, inventaire chaud
- **Redis Cluster** : Cache applicatif, analytics temps r√©el  
- **API Gateway Cache** : R√©ponses fr√©quentes, rate limiting

#### **üå°Ô∏è Warm Data (< 50ms)**  
- **PostgreSQL** : Donn√©es transactionnelles, logs m√©tier
- **Multi-AZ** : Haute disponibilit√© garantie
- **Read Replicas** : Scaling lecture pour analytics

#### **‚ùÑÔ∏è Cold Data (> 1s acceptable)**
- **S3 Lifecycle** : Archivage automatique selon √¢ge
- **ElasticSearch** : Recherche full-text dans documents
- **External APIs** : Synchronisation avec Odoo/OpenWMS

---

## üîÑ **FLUX D'√âV√âNEMENTS SYST√àME**

### **Flux Global Simplifi√© :**

```mermaid
sequenceDiagram
    participant C as "Client"
    participant AG as "API Gateway"
    participant L as "Lambda Function"
    participant SQ as "SQS Queue"
    participant DB as "Database"
    participant EXT as "External System"
    participant ELK as "ELK Stack"

    Note over C,ELK: Flux Global Simplifi√©
    
    C->>AG: HTTP Request
    AG->>AG: Auth + Rate Limiting
    
    alt Synchronous operation
        AG->>L: Process request
        L->>DB: Read/Write data
        L->>EXT: Call external API (if needed)
        L-->>AG: Return result
        AG-->>C: HTTP Response
    else Asynchronous operation
        AG->>SQ: Queue message
        AG-->>C: 202 Accepted
        SQ->>L: Process async
        L->>DB: Update data
        L->>EXT: External call
    end
    
    Note over L,ELK: All operations logged
    L->>ELK: Send logs + metrics
    
    alt Error occurs
        L->>SQ: Dead letter queue
        ELK->>ELK: Alert on error pattern
    end
```

### **Pattern Event-Driven Global :**

**Composants Cl√©s :**
- ‚úÖ **SQS Queues** : Buffer asynchrone pour toutes les actions
- ‚úÖ **Dead Letter Queues** : Resilience en cas d'√©chec
- ‚úÖ **Lambda Workers** : Traitement distribu√© et scalable
- ‚úÖ **Cache Invalidation** : Coh√©rence des donn√©es temps r√©el

**Points de Contr√¥le :**
1. **Rate Limiting** : Protection contre surcharge
2. **Authentication** : S√©curit√© sur chaque endpoint  
3. **Cache Strategy** : Performance optimis√©e
4. **Async Pattern** : R√©ponse utilisateur imm√©diate
5. **Error Handling** : Monitoring et alertes automatiques

---

## üí∏ **MOD√àLE DE CO√õTS D√âTAILL√â**

```
                           CO√õTS AWS INFRASTRUCTURE
                           
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       COMPUTE SERVICES                      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ Lambda (6 functions):                                       ‚îÇ
‚îÇ ‚Ä¢ 2M invocations/month √ó ‚Ç¨0.0000167              = ‚Ç¨33     ‚îÇ
‚îÇ ‚Ä¢ 512MB √ó 2min avg √ó 2M invocations              = ‚Ç¨167    ‚îÇ
‚îÇ ‚Ä¢ Subtotal Compute:                              ‚Ç¨200/mois ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        DATA SERVICES                        ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ RDS PostgreSQL r5.large:                                   ‚îÇ
‚îÇ ‚Ä¢ Instance 24/7                                  = ‚Ç¨230    ‚îÇ
‚îÇ ‚Ä¢ Multi-AZ deployment                            = ‚Ç¨115    ‚îÇ
‚îÇ ‚Ä¢ Storage 500GB GP2                              = ‚Ç¨58     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ ElastiCache Redis:                                          ‚îÇ
‚îÇ ‚Ä¢ 3 nodes cache.r5.large                         = ‚Ç¨175    ‚îÇ
‚îÇ ‚Ä¢ Multi-AZ replication                           = ‚Ç¨87     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ DynamoDB:                                                   ‚îÇ
‚îÇ ‚Ä¢ On-demand (hot data)                           = ‚Ç¨45     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ Subtotal Database:                               ‚Ç¨710/mois ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       STORAGE & CDN                         ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ S3 Storage:                                                 ‚îÇ
‚îÇ ‚Ä¢ 2TB documents (Standard)                       = ‚Ç¨47     ‚îÇ
‚îÇ ‚Ä¢ 500GB intelligent tiering                      = ‚Ç¨11     ‚îÇ
‚îÇ ‚Ä¢ Lifecycle transitions                          = ‚Ç¨5      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ CloudFront CDN:                                             ‚îÇ
‚îÇ ‚Ä¢ 1TB transfer/month                             = ‚Ç¨85     ‚îÇ
‚îÇ ‚Ä¢ 10M requests                                   = ‚Ç¨1      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ Subtotal Storage:                                ‚Ç¨149/mois ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    NETWORKING & MONITORING                  ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ API Gateway:                                                ‚îÇ
‚îÇ ‚Ä¢ 10M requests/month                             = ‚Ç¨35     ‚îÇ
‚îÇ ‚Ä¢ Data transfer                                  = ‚Ç¨8      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ SQS Queues:                                                 ‚îÇ
‚îÇ ‚Ä¢ 5M messages/month                              = ‚Ç¨2      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ Monitoring (CloudWatch + X-Ray + ELK):                     ‚îÇ
‚îÇ ‚Ä¢ Logs + Metrics + Traces                        = ‚Ç¨25     ‚îÇ
‚îÇ ‚Ä¢ ElasticSearch cluster (3 nodes)               = ‚Ç¨195    ‚îÇ
‚îÇ ‚Ä¢ Logstash + Kibana (small instances)           = ‚Ç¨45     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ Subtotal Network:                                ‚Ç¨335/mois ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       AI/ML SERVICES                        ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ AWS Textract (OCR):                                         ‚îÇ
‚îÇ ‚Ä¢ 10,000 pages/month                             = ‚Ç¨15     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ AWS Comprehend (NLP):                                       ‚îÇ
‚îÇ ‚Ä¢ Language detection 100k chars                 = ‚Ç¨3      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ SES Email Service:                                          ‚îÇ
‚îÇ ‚Ä¢ 50,000 emails/month                            = ‚Ç¨5      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ Subtotal AI/ML:                                  ‚Ç¨23/mois  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **R√©capitulatif Co√ªts :**

| **Cat√©gorie** | **Co√ªt/mois** | **% Total** |
|---------------|---------------|-------------|
| Compute (Lambda) | ‚Ç¨200 | 13% |
| Database (RDS+Redis+Dynamo) | ‚Ç¨710 | 48% |
| Storage & CDN | ‚Ç¨149 | 10% |
| Network & Monitoring | ‚Ç¨335 | 23% |
| AI/ML Services | ‚Ç¨23 | 2% |
| **TOTAL AWS** | **‚Ç¨1,417** | **96%** |
| Reserve (5%) | ‚Ç¨71 | 4% |
| **TOTAL INFRASTRUCTURE** | **‚Ç¨1,488/mois** | **100%** |

---

## üîß **D√âTAIL DES BRIQUES TECHNIQUES**

### **1. üåê API Gateway (Managed)**
**Responsabilit√©s :**
- **Rate Limiting** : 1000 req/min par client, burst 2000
- **Authentication** : Validation JWT + API keys partenaires
- **Transformation** : Mapping requests/responses selon clients
- **Cache** : TTL 5min pour GET, invalidation intelligent
- **Monitoring** : M√©triques temps r√©el + alertes

### **2. ‚ö° Lambda Orchestrator (Node.js)**
**Fonctionnalit√©s :**
- **Router Central** : Distribution vers services sp√©cialis√©s
- **Validation** : Sch√©mas JSONSchema pour tous endpoints
- **Cache Logic** : Redis query + cache invalidation patterns
- **Error Handling** : Retry logic + circuit breaker pattern
- **Transformation** : Adaptation donn√©es vers/depuis syst√®mes externes

### **3. üì¶ Lambda Order Processor**
**Logique M√©tier :**
- **Batch Processing** : Traite 10 commandes simultan√©ment  
- **State Machine** : Workflow commande avec transitions
- **Stock Management** : Int√©gration temps r√©el OpenWMS
- **Business Rules** : Validation r√®gles m√©tier complexes
- **Compensation** : Rollback automatique en cas d'√©chec

### **4. üí∞ Lambda Invoice Generator**
**Capacit√©s :**
- **Template Engine** : Handlebars avec 15+ templates m√©tier
- **PDF Generation** : Puppeteer haute qualit√© + optimisation
- **Multi-Currency** : Calculs automatiques taux change
- **Tax Engine** : R√®gles fiscales par pays/r√©gion
- **Digital Signature** : Certificats √©lectroniques conformes

### **5. üìÑ Lambda File Processor**  
**Intelligence :**
- **OCR Multimodal** : Textract modes adaptatifs selon document
- **ML Classification** : 20+ types documents auto-d√©tect√©s
- **Data Extraction** : Structured data depuis factures/contrats
- **Quality Control** : Scores confiance + validation manuelle
- **Indexation** : ElasticSearch avec contexte s√©mantique

### **6. üîî Lambda Notification Service**
**Canaux :**
- **Email** : Templates HTML responsive + tracking
- **SMS** : Int√©gration multi-providers (reliability)
- **Push Notifications** : PWA + mobile apps
- **Webhooks** : Callbacks vers syst√®mes clients
- **In-App** : Notifications temps r√©el WebSocket

### **7. üîç ELK Stack (Monitoring)**
**Composants :**
- **ElasticSearch** : 3 nodes cluster pour recherche logs temps r√©el
- **Logstash** : Pipeline transformation logs CloudWatch ‚Üí structured data
- **Kibana** : Dashboards business + technical metrics + alerting
- **Filebeat** : Agents collecte logs Lambda + API Gateway
- **ElastAlert** : R√®gles alertes custom (Slack + PagerDuty)

---

## üìä **MONITORING & OBSERVABILIT√â**

```
                      MONITORING ARCHITECTURE (ELK STACK)
                      
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      DATA COLLECTION                        ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ CLOUDWATCH  ‚îÇ  ‚îÇ   X-RAY     ‚îÇ  ‚îÇ      FILEBEAT       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   METRICS   ‚îÇ  ‚îÇ  TRACING    ‚îÇ  ‚îÇ   (LOG AGENT)       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Lambda    ‚îÇ  ‚îÇ ‚Ä¢ Request   ‚îÇ  ‚îÇ ‚Ä¢ Lambda logs       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ API GW    ‚îÇ  ‚îÇ   traces    ‚îÇ  ‚îÇ ‚Ä¢ Application logs  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ RDS       ‚îÇ  ‚îÇ ‚Ä¢ DB calls  ‚îÇ  ‚îÇ ‚Ä¢ Error logs        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Redis     ‚îÇ  ‚îÇ ‚Ä¢ External  ‚îÇ  ‚îÇ ‚Ä¢ Access logs       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ S3        ‚îÇ  ‚îÇ   APIs      ‚îÇ  ‚îÇ ‚Ä¢ Audit trails      ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ
                                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       ELK PROCESSING                        ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ              LOGSTASH (Data Pipeline)                   ‚îÇ
‚îÇ  ‚îÇ                                                         ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Parse JSON logs from CloudWatch                      ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Enrich with metadata (service, environment)          ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Transform X-Ray traces to structured data            ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Filter noise (health checks, static assets)          ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Calculate custom metrics (orders/min, errors)        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ
                                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      STORAGE & SEARCH                       ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ             ELASTICSEARCH CLUSTER                       ‚îÇ
‚îÇ  ‚îÇ                                                         ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Hot indices (last 7 days): 3 nodes                  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Warm indices (7-30 days): 2 nodes                   ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Cold indices (30+ days): 1 node                     ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Index templates for logs/metrics/traces             ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Real-time search & aggregations                     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ
                                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   VISUALIZATION & ALERTS                    ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ     KIBANA      ‚îÇ     ‚îÇ         ELASTALERT             ‚îÇ
‚îÇ  ‚îÇ   DASHBOARDS    ‚îÇ     ‚îÇ        (ALERTING)              ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ     ‚îÇ                                 ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Business KPIs ‚îÇ     ‚îÇ ‚Ä¢ Error rate > 1%              ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Tech metrics  ‚îÇ     ‚îÇ ‚Ä¢ Response time > 500ms        ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Error traces  ‚îÇ     ‚îÇ ‚Ä¢ Orders queue > 1000          ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Log explorer  ‚îÇ     ‚îÇ ‚Ä¢ Slack notifications          ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Cost analysis ‚îÇ     ‚îÇ ‚Ä¢ PagerDuty escalation         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **M√©triques Critiques Surveill√©es :**

#### **üéØ Business KPIs**
- **Orders/minute** : Peak handling capacity (target: 10/sec)
- **Revenue/hour** : Real-time business performance  
- **Error rate** : Global success rate (target: >99.5%)
- **Customer satisfaction** : Response time P95 <500ms

#### **‚öôÔ∏è Technical Metrics**  
- **Lambda duration** : Cold start optimization
- **Database performance** : Query time + connection pool
- **Cache hit ratio** : Redis efficiency (target: >85%)
- **API Gateway latency** : End-to-end response time

#### **üí∞ Cost Optimization**
- **Cost per order** : Target ‚Ç¨0.002 (excellent ratio)
- **Resource utilization** : Right-sizing instances
- **Scaling efficiency** : Auto-scaling triggers
- **Storage optimization** : S3 lifecycle effectiveness

---

## üöÄ **STRAT√âGIE DE D√âPLOIEMENT**

### **Environments Pipeline :**

```
DEV ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ STAGING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ PRODUCTION
 ‚îÇ              ‚îÇ                ‚îÇ
 ‚îÇ              ‚îÇ                ‚îÇ
 ‚ñº              ‚ñº                ‚ñº
Local         AWS Account     AWS Account
Lambda        (staging)      (production)
+             +              +
PostgreSQL    RDS t3.micro   RDS r5.large
Local         Redis small    Redis cluster
```

### **CI/CD Strategy :**

1. **Git Flow** : Feature branches ‚Üí develop ‚Üí main
2. **Automated Tests** : Unit + Integration + E2E 
3. **Infrastructure as Code** : Terraform + AWS CDK
4. **Blue/Green Deployment** : Zero-downtime releases
5. **Rollback Strategy** : Automatic rollback if KPIs degraded

---

## üèÅ **CONCLUSION ARCHITECTURE**

### **Forces de cette Architecture :**

‚úÖ **Scalabilit√© Automatique** : De 10k √† 1M commandes sans modification  
‚úÖ **Co√ªt Optimis√©** : ‚Ç¨0.002 par commande (excellent ratio)  
‚úÖ **R√©silience Native** : Multi-AZ, auto-healing, circuit breakers  
‚úÖ **Maintenance Minimale** : Services manag√©s AWS  
‚úÖ **Int√©gration Facilit√©e** : APIs standard REST + √©v√©nements  
‚úÖ **Monitoring Complet** : Observabilit√© temps r√©el  

### **√âvolutions Futures Pr√©vues :**

üîÆ **Machine Learning** : Pr√©dictions demand + optimisation stock  
üîÆ **IoT Integration** : Capteurs entrep√¥t + tracking temps r√©el  
üîÆ **API Marketplace** : √âcosyst√®me partenaires √©tendu  
üîÆ **GraphQL Layer** : Requ√™tes optimis√©es clients  
üîÆ **Edge Computing** : CloudFront + Lambda@Edge pour latence  



---

> üéØ **Architecture serverless event-driven optimis√©e pour croissance 100x avec co√ªts ma√Ætris√©s** 